<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>House Judge Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg1: #050816;
      --bg2: #111827;
      --accent: #facc15;
      --accent-soft: rgba(250, 204, 21, 0.2);
      --card: rgba(15, 23, 42, 0.9);
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --shadow-strong: 0 20px 40px rgba(0,0,0,0.5);
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 50%, #000 100%);
      color: var(--text-main);
      overflow: hidden;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: stretch;
    }

    .app {
      width: 100%;
      max-width: 1200px;
      padding: 1.5rem 1.2rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
      position: relative;
      height: 100vh;
    }

    @media (min-width: 768px) {
      .app {
        padding: 1.8rem 2rem;
      }
    }

    .title {
      font-weight: 700;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      font-size: clamp(1.1rem, 2.3vw, 1.6rem);
      display: flex;
      align-items: center;
      gap: 0.6rem;
      min-height: 1.5rem; /* —á—Ç–æ–±—ã –Ω–µ –ø—Ä—ã–≥–∞–ª layout */
    }

    .subtitle {
      display: none;
    }

    .verse {
      display: none;
    }

    .top-row {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      flex: 1;
    }

    @media (min-width: 900px) {
      .top-row {
        flex-direction: row;
        align-items: center; /* —Ü–µ–Ω—Ç—Ä –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
      }
    }

    /* PERSON CARD */

    .person-area {
      flex: 1.2;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      position: relative;
    }

    .hint {
      display: none;
    }

    .person-wrapper {
      position: relative;
      flex: 1;
      min-height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0.7rem;
    }

    .person-card {
      position: relative;
      width: min(420px, 90vw);
      max-width: 480px;
      background: radial-gradient(circle at top, #1f2937, #020617);
      border-radius: 1.6rem;
      box-shadow: var(--shadow-strong);
      padding: 1.1rem 1.3rem 1.2rem;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      gap: 0.8rem;
      cursor: grab;
      touch-action: none;
      user-select: none;
      animation: floatCard 3s ease-in-out infinite;
      border: 1px solid rgba(148,163,184,0.4);
      margin: 0 auto; /* –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —Ü–µ–Ω—Ç—Ä */
    }

    .person-card.dragging {
      cursor: grabbing;
      animation: none;
      box-shadow: 0 26px 60px rgba(0,0,0,0.7);
      transform: scale(1.02);
    }

    @keyframes floatCard {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-8px); }
    }

    .person-label {
      font-size: clamp(1.6rem, 3vw, 2.1rem);
      font-weight: 700;
      text-align: center;
    }

    .person-tagline {
      font-size: clamp(1.05rem, 2.3vw, 1.5rem);
      color: var(--text-muted);
      text-align: center;
    }

    .person-photo {
      width: 100%;
      border-radius: 1.2rem;
      overflow: hidden;
      background: #020617;
      border: 1px solid rgba(148,163,184,0.7);
      position: relative;
      aspect-ratio: 4 / 3;
      margin-top: 0.2rem;
    }

    .person-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .person-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(15,23,42,0.85);
      padding: 0.3rem 0.7rem;
      border-radius: 999px;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 0.3rem;
      border: 1px solid rgba(249,250,251,0.2);
    }

    .person-badge span.icon {
      opacity: 0.8;
    }

    .person-counter {
      margin-top: 0.25rem;
      font-size: clamp(0.95rem, 1.7vw, 1.15rem);
      color: var(--text-muted);
      text-align: center;
    }

    .person-stats {
      margin-top: 0.4rem;
      padding: 0.7rem 0.9rem;
      border-radius: 1rem;
      background: rgba(15,23,42,0.85);
      border: 1px solid rgba(55,65,81,0.9);
      font-size: clamp(0.95rem, 1.8vw, 1.2rem);
    }

    .person-stats-title {
      font-weight: 600;
      margin-bottom: 0.3rem;
      font-size: 1em;
      color: #e5e7eb;
    }

    .person-stats ul {
      list-style: none;
      margin: 0;
      padding-left: 0;
    }

    .person-stats li {
      display: flex;
      gap: 0.45rem;
      align-items: flex-start;
      margin-bottom: 0.2rem;
      color: var(--text-muted);
    }

    .person-stats li span.bullet {
      font-size: 1em;
      margin-top: 0.1rem;
    }

    /* HOUSES */

    .houses-area {
      flex: 1.2;
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .houses-title {
      display: none;
    }

    .houses-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 0.9rem;
      align-items: stretch;
      justify-content: center;
    }

    .house {
      flex: 1 1 45%;
      max-width: 260px;
      min-width: 150px;
      min-height: 150px;
      background: linear-gradient(145deg, rgba(30,64,175,0.5), rgba(15,23,42,0.9));
      border-radius: 1.2rem;
      padding: 0.6rem 0.7rem 0.7rem;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(148,163,184,0.7);
      box-shadow: 0 18px 35px rgba(15,23,42,0.7);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background 0.4s ease;
      animation: houseGlow 5s ease-in-out infinite;
    }

    .house-photo {
      position: relative;
      width: 100%;
      border-radius: 0.9rem;
      overflow: hidden;
      aspect-ratio: 4 / 3;
      background: #020617;
      border: 1px solid rgba(148,163,184,0.7);
    }

    .house-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    @keyframes houseGlow {
      0%,100% { box-shadow: 0 18px 35px rgba(15,23,42,0.7);}
      50% { box-shadow: 0 25px 45px rgba(234,179,8,0.45);}
    }

    .house-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.25rem;
    }

    .house-emoji {
      font-size: 1.9rem;
      filter: drop-shadow(0 0 8px rgba(250,204,21,0.7));
    }

    .house-name {
      font-size: clamp(1rem, 1.9vw, 1.3rem);
      font-weight: 600;
    }

    .house-desc {
      display: none;
    }

    .house-footer {
      font-size: clamp(0.8rem, 1.3vw, 0.95rem);
      color: rgba(226,232,240,0.65);
      display: flex;
      justify-content: flex-end;
      align-items: center;
      margin-top: 0.2rem;
      gap: 0.4rem;
    }

    .house .dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: rgba(248,250,252,0.7);
      box-shadow: 0 0 10px rgba(248,250,252,0.9);
    }

    .house-hover {
      transform: translateY(-4px) scale(1.02);
      box-shadow: 0 24px 48px rgba(234,179,8,0.6);
      border-color: var(--accent);
      background: linear-gradient(145deg, rgba(250,204,21,0.35), rgba(15,23,42,0.95));
    }

    .house-drop {
      animation: houseDrop 0.45s ease-out;
    }

    @keyframes houseDrop {
      0% { transform: translateY(-2px) scale(1.02); }
      50% { transform: translateY(2px) scale(1.04); }
      100% { transform: translateY(0) scale(1.02); }
    }

    /* BOTTOM BAR */

    .bottom-bar {
      display: flex;
      justify-content: space-between;
      gap: 0.7rem;
      align-items: center;
      margin-top: 0.3rem;
      flex-wrap: wrap;
    }

    .status-text {
      font-size: clamp(1rem, 1.8vw, 1.3rem);
      color: var(--text-muted);
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 0.7rem 1.2rem;
      font-size: clamp(0.9rem, 1.6vw, 1.1rem);
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      background: radial-gradient(circle at top left, #facc15, #eab308);
      color: #111827;
      box-shadow: 0 14px 30px rgba(234,179,8,0.6);
      transition: transform 0.16s ease, box-shadow 0.16s ease;
      white-space: nowrap;
    }

    .btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 6px 14px rgba(0,0,0,0.6);
    }

    .btn-secondary {
      background: rgba(15,23,42,0.9);
      color: var(--text-main);
      box-shadow: 0 10px 24px rgba(15,23,42,0.8);
      border: 1px solid rgba(148,163,184,0.7);
    }

    .btn span.icon {
      font-size: 1.1em;
    }

    /* SUMMARY MODAL */

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15,23,42,0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
      padding: 1.2rem;
    }

    .modal-backdrop.show {
      display: flex;
    }

    .modal {
      width: 100%;
      max-width: 720px;
      max-height: 90vh;
      background: radial-gradient(circle at top, #111827, #020617);
      border-radius: 1.4rem;
      padding: 1.1rem 1.2rem 1.2rem;
      box-shadow: var(--shadow-strong);
      border: 1px solid rgba(148,163,184,0.7);
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      overflow: hidden;
    }

    @media (min-width: 768px) {
      .modal {
        padding: 1.2rem 1.6rem 1.3rem;
      }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
    }

    .modal-title {
      font-size: clamp(1rem, 1.9vw, 1.3rem);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .modal-title span.icon {
      font-size: 1.4em;
    }

    .modal-body {
      overflow-y: auto;
      padding-right: 0.4rem;
      margin-top: 0.4rem;
    }

    .summary-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
      padding: 0.35rem 0.1rem;
      border-bottom: 1px dashed rgba(55,65,81,0.8);
      font-size: clamp(0.85rem, 1.5vw, 1rem);
    }

    .summary-person {
      display: flex;
      align-items: center;
      gap: 0.45rem;
    }

    .summary-avatar {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid rgba(148,163,184,0.8);
      flex-shrink: 0;
    }

    .summary-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .summary-name {
      font-weight: 500;
    }

    .summary-tagline {
      color: var(--text-muted);
      font-size: 0.75em;
    }

    .summary-house {
      display: flex;
      align-items: center;
      gap: 0.35rem;
      color: #fbbf24;
      font-weight: 600;
    }

    .summary-house span.emoji {
      font-size: 1.2em;
    }

    .empty-state {
      text-align: center;
      padding: 1rem 0.4rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

  </style>
</head>
<body>
  <div class="app">
    <div>
      <div class="title">
        <!-- —É–±—Ä–∞–Ω –∑–Ω–∞—á–æ–∫ –∏ —Ç–µ–∫—Å—Ç -->
      </div>
      <div class="subtitle"></div>
      <div class="verse"></div>
    </div>

    <div class="top-row">
      <!-- PERSON SIDE -->
      <section class="person-area">
        <div class="hint"></div>

        <div class="person-wrapper">
          <div id="person-card" class="person-card">
            <div class="person-label" id="person-name">–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</div>
            <div class="person-tagline" id="person-tagline">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</div>

            <div class="person-photo">
              <img id="person-img" src="" alt="person">
              <div class="person-badge">
                <span class="icon">üë§</span>
                <span id="person-type">–¢–∏–ø</span>
              </div>
            </div>

            <div class="person-stats" id="person-stats">
              <!-- –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ JS -->
            </div>

            <div class="person-counter" id="person-counter">
              –ü–µ—Ä—Å–æ–Ω–∞–∂ 1 –∏–∑ 1
            </div>
          </div>
        </div>
      </section>

      <!-- HOUSES SIDE -->
      <section class="houses-area">
        <div class="houses-title"></div>
        <div class="houses-grid">
          <div class="house" data-house-id="0">
            <div class="house-header">
              <div class="house-emoji">üèöÔ∏è</div>
              <div>
                <div class="house-name" id="house-name-0">–î–æ–º 1</div>
              </div>
            </div>
            <div class="house-photo">
              <img id="house-img-0" src="" alt="–î–æ–º 1">
            </div>
            <div class="house-footer">
              <span class="dot"></span>
            </div>
          </div>

          <div class="house" data-house-id="1">
            <div class="house-header">
              <div class="house-emoji">üè†</div>
              <div>
                <div class="house-name" id="house-name-1">–î–æ–º 2</div>
              </div>
            </div>
            <div class="house-photo">
              <img id="house-img-1" src="" alt="–î–æ–º 2">
            </div>
            <div class="house-footer">
              <span class="dot"></span>
            </div>
          </div>

          <div class="house" data-house-id="2">
            <div class="house-header">
              <div class="house-emoji">üè°</div>
              <div>
                <div class="house-name" id="house-name-2">–î–æ–º 3</div>
              </div>
            </div>
            <div class="house-photo">
              <img id="house-img-2" src="" alt="–î–æ–º 3">
            </div>
            <div class="house-footer">
              <span class="dot"></span>
            </div>
          </div>

          <div class="house" data-house-id="3">
            <div class="house-header">
              <div class="house-emoji">üèõÔ∏è</div>
              <div>
                <div class="house-name" id="house-name-3">–î–æ–º 4</div>
              </div>
            </div>
            <div class="house-photo">
              <img id="house-img-3" src="" alt="–î–æ–º 4">
            </div>
            <div class="house-footer">
              <span class="dot"></span>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- BOTTOM BAR -->
    <div class="bottom-bar">
      <div class="status-text" id="status-text">
        –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ –æ–¥–∏–Ω –∏–∑ –¥–æ–º–æ–≤.
      </div>
      <div style="display:flex;gap:0.5rem;flex-wrap:wrap;">
        <button class="btn-secondary btn" id="btn-reset">
          <span class="icon">üîÑ</span>
          <span>–° –Ω–∞—á–∞–ª–∞</span>
        </button>
        <button class="btn" id="btn-summary">
          <span class="icon">üìä</span>
          <span>–ö–æ–≥–æ –∫—É–¥–∞ –∑–∞—Å–µ–ª–∏–ª–∏</span>
        </button>
      </div>
    </div>
  </div>

  <!-- SUMMARY MODAL -->
  <div class="modal-backdrop" id="modal-backdrop" aria-hidden="true">
    <div class="modal">
      <div class="modal-header">
        <div class="modal-title">
          <span class="icon">üìä</span>
          <span>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</span>
        </div>
        <button class="btn-secondary btn" id="btn-close-modal">
          <span class="icon">‚úñ</span>
          <span>–ó–∞–∫—Ä—ã—Ç—å</span>
        </button>
      </div>
      <div class="modal-body" id="summary-body">
        <div class="empty-state">
          –ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ –∑–∞—Å–µ–ª–∏–ª–∏. –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –¥–æ–º–∞.
        </div>
      </div>
      <div style="font-size:0.8rem;color:var(--text-muted);margin-top:0.3rem;">
        –ü–æ—Å–ª–µ –∏–≥—Ä—ã –º–æ–∂–Ω–æ –æ–±—Å—É–¥–∏—Ç—å: –ø–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫ —Ä–∞—Å—Å–µ–ª–∏–ª–∏ –ª—é–¥–µ–π –∏ –∫–∞–∫ –º—ã —á–∞—Å—Ç–æ —Å—É–¥–∏–º –ø–æ –≤–Ω–µ—à–Ω–∏–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º.
      </div>
    </div>
  </div>

  <script>
    const personCard = document.getElementById('person-card');
    const personImg = document.getElementById('person-img');
    const personNameEl = document.getElementById('person-name');
    const personTypeEl = document.getElementById('person-type');
    const personTaglineEl = document.getElementById('person-tagline');
    const personCounterEl = document.getElementById('person-counter');
    const personStatsEl = document.getElementById('person-stats');
    const statusTextEl = document.getElementById('status-text');
    const houses = Array.from(document.querySelectorAll('.house'));

    const btnSummary = document.getElementById('btn-summary');
    const btnReset = document.getElementById('btn-reset');
    const modalBackdrop = document.getElementById('modal-backdrop');
    const btnCloseModal = document.getElementById('btn-close-modal');
    const summaryBody = document.getElementById('summary-body');

    let people = [];
    let currentIndex = 0;
    let dragging = false;
    let dragOffsetX = 0;
    let dragOffsetY = 0;
    let originalRect = null;
    let results = [];

    function onPointerDown(e) {
      if (currentIndex >= people.length) return;
      dragging = true;
      personCard.classList.add('dragging');
      const rect = personCard.getBoundingClientRect();
      originalRect = rect;
      dragOffsetX = e.clientX - rect.left;
      dragOffsetY = e.clientY - rect.top;
      personCard.style.position = 'fixed';
      personCard.style.left = rect.left + 'px';
      personCard.style.top = rect.top + 'px';
      personCard.style.zIndex = 20;
      personCard.style.transform = 'none';
      personCard.setPointerCapture(e.pointerId);
      e.preventDefault();
    }

    function onPointerMove(e) {
      if (!dragging) return;
      const x = e.clientX - dragOffsetX;
      const y = e.clientY - dragOffsetY;
      personCard.style.left = x + 'px';
      personCard.style.top = y + 'px';

      const px = e.clientX;
      const py = e.clientY;
      houses.forEach(h => {
        const r = h.getBoundingClientRect();
        const inside = px >= r.left && px <= r.right && py >= r.top && py <= r.bottom;
        h.classList.toggle('house-hover', inside);
      });
    }

    function onPointerUp(e) {
      if (!dragging) return;
      dragging = false;
      personCard.classList.remove('dragging');
      personCard.releasePointerCapture(e.pointerId);

      const px = e.clientX;
      const py = e.clientY;

      let droppedHouse = null;
      houses.forEach(h => {
        const r = h.getBoundingClientRect();
        if (px >= r.left && px <= r.right && py >= r.top && py <= r.bottom) {
          droppedHouse = h;
        }
        h.classList.remove('house-hover');
      });

      if (droppedHouse) {
        const houseId = parseInt(droppedHouse.dataset.houseId, 10);
        handleDrop(houseId, droppedHouse);
      } else {
        if (originalRect) {
          personCard.style.transition = 'left 0.18s ease, top 0.18s ease';
          personCard.style.left = originalRect.left + 'px';
          personCard.style.top = originalRect.top + 'px';
          setTimeout(() => {
            personCard.style.position = '';
            personCard.style.left = '';
            personCard.style.top = '';
            personCard.style.transform = '';
            personCard.style.transition = '';
          }, 190);
        }
      }
    }

    personCard.addEventListener('pointerdown', onPointerDown);
    window.addEventListener('pointermove', onPointerMove);
    window.addEventListener('pointerup', onPointerUp);

    function handleDrop(houseId, houseEl) {
      houseEl.classList.add('house-drop');
      setTimeout(() => houseEl.classList.remove('house-drop'), 450);

      results.push({
        personIndex: currentIndex,
        houseId
      });

      playDropFlash();

      statusTextEl.textContent = '–ì–æ—Ç–æ–≤–æ. –°–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–µ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.';

      currentIndex++;
      if (currentIndex >= people.length) {
        statusTextEl.textContent = '–í—Å–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ —Ä–∞—Å—Å–µ–ª–µ–Ω—ã. –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –æ–±—Å—É–∂–¥–∞—Ç—å.';
        personCard.style.opacity = '0';
        personCard.style.transform = 'scale(0.95)';
        setTimeout(() => {
          personCard.style.display = 'none';
        }, 250);
      } else {
        showPerson(currentIndex);
      }
    }

    function playDropFlash() {
      const flash = document.createElement('div');
      flash.style.position = 'fixed';
      flash.style.inset = '0';
      flash.style.pointerEvents = 'none';
      flash.style.background = 'radial-gradient(circle at center, rgba(250,204,21,0.28), transparent 60%)';
      flash.style.opacity = '0';
      flash.style.zIndex = '5';
      document.body.appendChild(flash);
      flash.animate(
        [
          { opacity: 0 },
          { opacity: 1 },
          { opacity: 0 }
        ],
        { duration: 280, easing: 'ease-out' }
      ).onfinish = () => flash.remove();
    }

    function renderStats(p) {
      if (!p.stats || !p.stats.length) {
        personStatsEl.innerHTML = '';
        personStatsEl.style.display = 'none';
        return;
      }
      personStatsEl.style.display = 'block';
      const items = p.stats.map(s => `
        <li>
          <span class="bullet">‚Ä¢</span>
          <span>${s}</span>
        </li>
      `).join('');
      personStatsEl.innerHTML = `
        <div class="person-stats-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</div>
        <ul>${items}</ul>
      `;
    }

    function showPerson(index) {
      const p = people[index];
      if (!p) return;

      personCard.style.display = 'flex';
      personCard.style.opacity = '0';
      personCard.style.transform = 'translateY(10px) scale(0.97)';
      personCard.style.position = '';
      personCard.style.left = '';
      personCard.style.top = '';
      personCard.style.transition = '';

      personNameEl.textContent = p.name;
      personTypeEl.textContent = p.type || '';
      personTaglineEl.textContent = p.tagline || '';
      personImg.src = p.img;
      personImg.alt = p.name;
      renderStats(p);

      personCounterEl.textContent = `–ü–µ—Ä—Å–æ–Ω–∞–∂ ${index + 1} –∏–∑ ${people.length}`;
      statusTextEl.textContent = '–ö—É–¥–∞ –±—ã —Ç—ã –ø–æ—Å–µ–ª–∏–ª —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞?';

      requestAnimationFrame(() => {
        personCard.style.transition = 'opacity 0.22s ease, transform 0.22s ease';
        personCard.style.opacity = '1';
        personCard.style.transform = 'translateY(0) scale(1)';
      });
    }

    function resetGame() {
      currentIndex = 0;
      results = [];
      personCard.style.display = '';
      personCard.style.opacity = '1';
      personCard.style.transform = '';
      statusTextEl.textContent = '–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ –æ–¥–∏–Ω –∏–∑ –¥–æ–º–æ–≤.';
      showPerson(0);
    }

    btnReset.addEventListener('click', resetGame);

    function openSummary() {
      modalBackdrop.classList.add('show');
      renderSummary();
    }

    function closeSummary() {
      modalBackdrop.classList.remove('show');
    }

    btnSummary.addEventListener('click', openSummary);
    btnCloseModal.addEventListener('click', closeSummary);
    modalBackdrop.addEventListener('click', (e) => {
      if (e.target === modalBackdrop) closeSummary();
    });

    function renderSummary() {
      summaryBody.innerHTML = '';

      if (!results.length) {
        summaryBody.innerHTML = '<div class="empty-state">–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ –∑–∞—Å–µ–ª–∏–ª–∏. –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –¥–æ–º–∞.</div>';
        return;
      }

      results.forEach((res, idx) => {
        const person = people[res.personIndex];
        const house = houses.find(h => parseInt(h.dataset.houseId, 10) === res.houseId);
        const houseNameEl = house.querySelector('.house-name');
        const houseEmoji = house.querySelector('.house-emoji');

        const row = document.createElement('div');
        row.className = 'summary-item';

        row.innerHTML = `
          <div class="summary-person">
            <div class="summary-avatar">
              <img src="${person.img}" alt="${person.name}">
            </div>
            <div>
              <div class="summary-name">${idx + 1}. ${person.name}</div>
              <div class="summary-tagline">${person.tagline || ''}</div>
            </div>
          </div>
          <div class="summary-house">
            <span class="emoji">${houseEmoji.textContent}</span>
            <span>${houseNameEl.textContent}</span>
          </div>
        `;
        summaryBody.appendChild(row);
      });
    }

    // PEOPLE CONFIG

    const PEOPLE = [
      {
        name: '–ê—Ä—Ç—ë–º, 24 –≥–æ–¥–∞',
        type: '–ë–µ–∑ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞',
        tagline: '–°–ø–∏—Ç –≤ –Ω–æ—á–ª–µ–∂–∫–µ, —á–∞—Å—Ç–æ —Å–∏–¥–∏—Ç –Ω–∞ –≤–æ–∫–∑–∞–ª–µ.',
        img: 'artem24.jpg',
        stats: [
          '–î–æ—Ö–æ–¥: —Å–ª—É—á–∞–π–Ω—ã–µ –ø–æ–¥—Ä–∞–±–æ—Ç–∫–∏, –æ–∫–æ–ª–æ 15 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü.',
          '–ú–∞—à–∏–Ω–∞: –Ω–µ—Ç.',
          '–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª –∫–æ–ª–ª–µ–¥–∂.',
          '–í–µ—â–∏: –æ–¥–∏–Ω —Ä—é–∫–∑–∞–∫ —Å –æ–¥–µ–∂–¥–æ–π.'
        ]
      },
      {
        name: '–ú–∞—Ä–∏–Ω–∞, 32 –≥–æ–¥–∞',
        type: '–û—Ñ–∏—Å–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫',
        tagline: '–†–∞–±–æ—Ç–∞–µ—Ç –±—É—Ö–≥–∞–ª—Ç–µ—Ä–æ–º –≤ –Ω–µ–±–æ–ª—å—à–æ–π —Ñ–∏—Ä–º–µ.',
        img: 'marina.webp',
        stats: [
          '–î–æ—Ö–æ–¥: –æ–∫–æ–ª–æ 90 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü.',
          '–ú–∞—à–∏–Ω–∞: –ø–æ–¥–µ—Ä–∂–∞–Ω–Ω—ã–π Hyundai.',
          '–°–µ–º—å—è: –∑–∞–º—É–∂–µ–º, –æ–¥–∏–Ω —Ä–µ–±—ë–Ω–æ–∫.',
          '–°—ä—ë–º–Ω–∞—è –¥–≤—É—Ö–∫–æ–º–Ω–∞—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞.'
        ]
      },
      {
        name: '–ò–≥–æ—Ä—å, 55 –ª–µ—Ç',
        type: '–í–ª–∞–¥–µ–ª–µ—Ü –∫–æ–º–ø–∞–Ω–∏–∏',
        tagline: '–£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ç—å—é –º–∞–≥–∞–∑–∏–Ω–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏.',
        img: 'igor.jpg',
        stats: [
          '–î–æ—Ö–æ–¥: –æ—Ç 800 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü –∏ –≤—ã—à–µ.',
          '–ú–∞—à–∏–Ω–∞: Mercedes S-–∫–ª–∞—Å—Å–∞.',
          '–ñ–∏–ª—å—ë: –∑–∞–≥–æ—Ä–æ–¥–Ω—ã–π –¥–æ–º –∏ –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ü–µ–Ω—Ç—Ä–µ.',
          '–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å: –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø–æ–º–µ—â–µ–Ω–∏–π.'
        ]
      },
      {
        name: '–û–ª—å–≥–∞, 67 –ª–µ—Ç',
        type: '–ü–µ–Ω—Å–∏–æ–Ω–µ—Ä',
        tagline: '–í–æ—Å–ø–∏—Ç—ã–≤–∞–µ—Ç –≤–Ω—É–∫–æ–≤, –∂–∏–≤—ë—Ç –≤ —Å—Ç–∞—Ä–æ–π –ø—è—Ç–∏—ç—Ç–∞–∂–∫–µ.',
        img: 'olga.webp',
        stats: [
          '–î–æ—Ö–æ–¥: –ø–µ–Ω—Å–∏—è –æ–∫–æ–ª–æ 25 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü.',
          '–ú–∞—à–∏–Ω–∞: –Ω–µ—Ç.',
          '–ñ–∏–ª—å—ë: –¥–≤—É—Ö–∫–æ–º–Ω–∞—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Ö—Ä—É—â—ë–≤–∫–µ.',
          '–û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–∞—Ç—ã: –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –∏ –ø–æ–º–æ—â—å –¥–µ—Ç—è–º.'
        ]
      },
      {
        name: '–ù–∏–∫–∏—Ç–∞, 19 –ª–µ—Ç',
        type: '–°—Ç—É–¥–µ–Ω—Ç',
        tagline: '–í—Å–µ–≥–¥–∞ –≤ —Ö—É–¥–∏ –∏ –∫—Ä–æ—Å—Å–æ–≤–∫–∞—Ö, –ª—é–±–∏—Ç –º—É–∑—ã–∫—É.',
        img: 'nic.webp',
        stats: [
          '–î–æ—Ö–æ–¥: –ø–æ–¥—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫—É—Ä—å–µ—Ä–æ–º, –æ–∫–æ–ª–æ 30 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü.',
          '–ú–∞—à–∏–Ω–∞: —Å–∞–º–æ–∫–∞—Ç –∏ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç.',
          '–ñ–∏–ª—å—ë: –æ–±—â–µ–∂–∏—Ç–∏–µ.',
          '–¢—Ä–∞—Ç–∏—Ç –¥–µ–Ω—å–≥–∏: –µ–¥–∞, —Ç–µ—Ö–Ω–∏–∫–∞, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è.'
        ]
      },
      {
        name: '–°–≤–µ—Ç–ª–∞–Ω–∞, 40 –ª–µ—Ç',
        type: '–í—Ä–∞—á',
        tagline: '–†–∞–±–æ—Ç–∞–µ—Ç –≤ –≥–æ—Ä–æ–¥—Å–∫–æ–π –±–æ–ª—å–Ω–∏—Ü–µ, —á–∞—Å—Ç–æ –¥–µ–∂—É—Ä–∏—Ç –Ω–æ—á—å—é.',
        img: 'svetlana.webp',
        stats: [
          '–î–æ—Ö–æ–¥: –æ–∫–æ–ª–æ 120 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü —Å –¥–µ–∂—É—Ä—Å—Ç–≤–∞–º–∏.',
          '–ú–∞—à–∏–Ω–∞: Skoda Octavia.',
          '–ñ–∏–ª—å—ë: –∏–ø–æ—Ç–µ–∫–∞ –∑–∞ —Ç—Ä—ë—Ö–∫–æ–º–Ω–∞—Ç–Ω—É—é –∫–≤–∞—Ä—Ç–∏—Ä—É.',
          '–ß–∞—Å—Ç—å –¥–æ—Ö–æ–¥–∞ —É—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–º–æ—â—å —Ä–æ–¥–∏—Ç–µ–ª—è–º.'
        ]
      },
      {
        name: '–î–µ–Ω–∏—Å, 29 –ª–µ—Ç',
        type: '–ê–π—Ç–∏-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç',
        tagline: '–†–∞–±–æ—Ç–∞–µ—Ç —É–¥–∞–ª—ë–Ω–Ω–æ, –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ —Å –Ω–æ—É—Ç–±—É–∫–æ–º.',
        img: 'denis.jpg',
        stats: [
          '–î–æ—Ö–æ–¥: –æ–∫–æ–ª–æ 250 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü.',
          '–ú–∞—à–∏–Ω–∞: Tesla (–∫–∞—Ä—à–µ—Ä–∏–Ω–≥ –∑–∞ –≥–æ—Ä–æ–¥–æ–º / –≤ –ø–æ–µ–∑–¥–∫–∞—Ö).',
          '–ñ–∏–ª—å—ë: —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–ø–∞—Ä—Ç-–æ—Ç–µ–ª—å, –∞—Ä–µ–Ω–¥–∞.',
          '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏: –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ –∏ –∞–∫—Ü–∏–∏.'
        ]
      },
      {
        name: '–ê–Ω–Ω–∞, 35 –ª–µ—Ç',
        type: '–ú–Ω–æ–≥–æ–¥–µ—Ç–Ω–∞—è –º–∞–º–∞',
        tagline: '–í–æ—Å–ø–∏—Ç—ã–≤–∞–µ—Ç —Ç—Ä–æ–∏—Ö –¥–µ—Ç–µ–π, –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–º–∞.',
        img: 'anna.webp',
        stats: [
          '–î–æ—Ö–æ–¥ —Å–µ–º—å–∏: –æ–∫–æ–ª–æ 100 000 ‚ÇΩ –≤ –º–µ—Å—è—Ü –Ω–∞ –≤—Å–µ—Ö.',
          '–ú–∞—à–∏–Ω–∞: –º–∏–Ω–∏–≤—ç–Ω –¥–ª—è –≤—Å–µ–π —Å–µ–º—å–∏.',
          '–ñ–∏–ª—å—ë: —Ç—Ä—ë—Ö–∫–æ–º–Ω–∞—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ –≤ —Å–ø–∞–ª—å–Ω–æ–º —Ä–∞–π–æ–Ω–µ.',
          '–û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–∞—Ç—ã: –¥–µ—Ç–∏, —à–∫–æ–ª–∞, –æ–¥–µ–∂–¥–∞, –µ–¥–∞.'
        ]
      }
    ];

    const HOUSES_CONFIG = [
      {
        name: '–î–æ–º 1',
        emoji: 'üèöÔ∏è',
        img: 'home1.webp'
      },
      {
        name: '–î–æ–º 2',
        emoji: 'üè†',
        img: 'home2.jpg'
      },
      {
        name: '–î–æ–º 3',
        emoji: 'üè°',
        img: 'howe3.webp'
      },
      {
        name: '–î–æ–º 4',
        emoji: 'üèõÔ∏è',
        img: 'home4.webp'
      }
    ];

    function initConfig() {
      people = PEOPLE.slice();

      HOUSES_CONFIG.forEach((h, idx) => {
        const nameEl = document.getElementById('house-name-' + idx);
        const emojiEl = houses[idx]?.querySelector('.house-emoji');
        const imgEl = document.getElementById('house-img-' + idx);
        if (!houses[idx]) return;
        if (nameEl) nameEl.textContent = h.name;
        if (emojiEl && h.emoji) emojiEl.textContent = h.emoji;
        if (imgEl && h.img) imgEl.src = h.img;
      });
    }

    window.addEventListener('load', () => {
      initConfig();
      if (people.length === 0) {
        statusTextEl.textContent = '–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –º–∞—Å—Å–∏–≤ PEOPLE –≤–Ω–∏–∑—É —Ñ–∞–π–ª–∞.';
        personCard.style.display = 'none';
      } else {
        showPerson(0);
      }
    });
  </script>
</body>
</html>
